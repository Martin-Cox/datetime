{"version":3,"sources":["../src/datetime.js"],"names":[],"mappings":"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","file":"datetime.stg.js","sourcesContent":["/**\r\n * Created by Serge Balykov (ua9msn@mail.ru) on 2/1/17.\r\n */\r\n\r\n(function($, window, document, undefined){\r\n\r\n    /* eslint-disable no-unused-vars */\r\n    const KEY_TAB       = 9,\r\n          KEY_ENTER     = 13,\r\n          KEY_BACKSPACE = 8,\r\n          KEY_DELETE    = 46,\r\n          KEY_ESCAPE    = 27,\r\n          KEY_SPACE     = 32,\r\n          KEY_DOWN      = 40,\r\n          KEY_UP        = 38,\r\n          KEY_LEFT      = 37,\r\n          KEY_RIGHT     = 39,\r\n          KEY_A         = 65,\r\n          KEY_C         = 67,\r\n          KEY_V         = 86,\r\n          KEY_D         = 68,\r\n          KEY_F2        = 113,\r\n          KEY_INSERT    = 45,\r\n          KEY_ADD       = 107,\r\n          KEY_MINUS     = 109;\r\n    /* eslint-enable no-unused-vars */\r\n\r\n    const DAYLEN = 86400000;\r\n\r\n    const pluginName = 'datetime',\r\n          defaults   = {\r\n              datetime: NaN,\r\n              locale:   navigator.language,\r\n              format:   'dd.MM.yyyy HH:mm:ss',\r\n              minDate:  NaN,\r\n              maxDate:  NaN,\r\n              minTime:  NaN,\r\n              maxTime:  NaN,\r\n              tabControls: false\r\n          };\r\n\r\n    function Plugin(element, options){\r\n        this.$element          = element;\r\n        this.element           = element[0];\r\n        this.currentSpareIndex = 0;\r\n        this.spares            = [];\r\n\r\n        this._handleMouseDown  = this._handleMouseDown.bind(this);\r\n        this._handleKeydown    = this._handleKeydown.bind(this);\r\n        this._handleMousewheel = this._handleMousewheel.bind(this);\r\n\r\n        this._init();\r\n        //clone value\r\n\r\n        this.setOptions(Object.assign({}, defaults, options));\r\n    }\r\n\r\n    Plugin.prototype = {\r\n\r\n        _init: function(){\r\n            this.element.setSelectionRange(0, 0);\r\n\r\n            this.element.addEventListener('mouseup', this._handleMouseDown);\r\n            this.element.addEventListener('keydown', this._handleKeydown);\r\n            this.element.addEventListener('mousewheel', this._handleMousewheel);\r\n        },\r\n\r\n        _refresh: function(){\r\n            this.spares        = this._disassembleTimestamp(this.datetime, this.options.locale, this.options.format);\r\n            this.element.value = this.spares.map(s => s.strval).join('');\r\n\r\n            const spare = this.spares[this.currentSpareIndex];\r\n            if(spare) {\r\n                this.element.setSelectionRange(spare.offset, spare.offset + spare.length);\r\n            }\r\n        },\r\n\r\n        _handleMouseDown: function(e){\r\n\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            this._ensureValueExist();\r\n\r\n            this.currentSpareIndex = this._calculateSpareIndexAtCaretPosition(e.target.selectionStart, this.spares);\r\n            const spare            = this.spares[this.currentSpareIndex];\r\n\r\n            e.target.focus();\r\n\r\n            if(!spare) return;\r\n\r\n            e.target.setSelectionRange(spare.offset, spare.offset + spare.length);\r\n        },\r\n\r\n        _ensureValueExist: function(){\r\n            if(!this.spares.length) {\r\n                this.datetime = new Date();\r\n                this._refresh();\r\n            }\r\n\r\n        },\r\n\r\n        _handleKeydown: function(e){\r\n\r\n            this._ensureValueExist();\r\n\r\n            const spare = this.spares[this.currentSpareIndex];\r\n            const left  = -1;\r\n            const right = 1;\r\n\r\n            const move = (direction) => {\r\n                this.currentSpareIndex = this._calculateNextSpareIndex(this.spares, this.currentSpareIndex, direction, function(x){\r\n                    return x.field !== 'Delimiter';\r\n                });\r\n                this._refresh();\r\n            };\r\n\r\n            switch(e.which) {\r\n\r\n                case KEY_LEFT:\r\n                    e.preventDefault();\r\n                    move(left);\r\n                    break;\r\n\r\n                case KEY_RIGHT:\r\n                    e.preventDefault();\r\n                    move(right);\r\n                    break;\r\n\r\n                case KEY_UP:\r\n                case KEY_ADD:\r\n                    e.preventDefault();\r\n                    this._crement(1, spare);\r\n                    break;\r\n\r\n                case KEY_DOWN:\r\n                case KEY_MINUS:\r\n                    e.preventDefault();\r\n                    this._crement(-1, spare);\r\n                    break;\r\n\r\n                case KEY_DELETE:\r\n                    e.preventDefault();\r\n                    this.datetime = new Date(NaN);\r\n                    this._refresh();\r\n                    break;\r\n\r\n                case KEY_TAB:\r\n                    if (this.options.tabControls) {\r\n                        const previousSpareIndex = this.currentSpareIndex; \r\n\r\n                        if (e.shiftKey)\r\n                        {\r\n                            move(left);\r\n                        }\r\n                        else\r\n                        {\r\n                            move(right);\r\n                        }\r\n\r\n                        // Prevent default tab behaviour if there was still room to move inside the control\r\n                        if (previousSpareIndex !== this.currentSpareIndex)\r\n                        {\r\n                             e.preventDefault();\r\n                        }\r\n                    }\r\n                    break;\r\n\r\n                case KEY_A:\r\n                case KEY_C:\r\n                    if(!e.ctrlKey) {\r\n                        e.preventDefault();\r\n                    }\r\n                    break;\r\n\r\n                default:\r\n                    // https://github.com/ua9msn/datetime/issues/2\r\n                    e.preventDefault();\r\n                    // ignore non-numbers\r\n                    if(!isFinite(e.key)) return;\r\n                    // ignore ampm\r\n                    if(spare.field === 'AMPM') return;\r\n                    // ignore Weekday\r\n                    if(spare.field === 'Weekday') return;\r\n\r\n                    this._modify(+e.key, spare);\r\n\r\n                    break;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _handleMousewheel: function(e){\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            this._ensureValueExist();\r\n\r\n            const spare = this.spares[this.currentSpareIndex];\r\n            const direction = Math.sign(e.wheelDelta);\r\n\r\n            this._crement(direction, spare);\r\n            this._refresh();\r\n\r\n        },\r\n\r\n        _calculateSpareIndexAtCaretPosition: function(caretPosition, spares){\r\n\r\n            let index = 0,\r\n                s = spares.findIndex( spare => spare.field !== 'Delimiter' );\r\n\r\n            for(s; s < spares.length ; s++) {\r\n\r\n                if(spares[s].field !== 'Delimiter') {\r\n                    index = s;\r\n                }\r\n\r\n                if(spares[s].offset >= caretPosition){\r\n                    break;\r\n                }\r\n\r\n            }\r\n\r\n            return index;\r\n        },\r\n\r\n        _calculateNextSpareIndex: function(spares, currentIndex, direction, testFn){\r\n\r\n            direction = Math.sign(direction); //make sure the direction is +1 or -1\r\n            let newIndex = currentIndex ;\r\n            newIndex = newIndex / 1;\r\n\r\n            for(let y = currentIndex + direction ; y >= 0 && y < spares.length ; y += direction ){\r\n                if( testFn(spares[y]) ) {\r\n                    newIndex = y;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return newIndex;\r\n\r\n        },\r\n\r\n        _getMaxFieldValueAtDate: function(date, fieldName){\r\n\r\n            const fy = date.getFullYear();\r\n            const m  = date.getMonth();\r\n\r\n            switch(fieldName) {\r\n                case 'FullYear':\r\n                    return 9999;\r\n                case 'Month':\r\n                    return 12;\r\n                case 'Date':\r\n                    return (new Date(fy, m + 1, 0)).getDate(); // get number of days in the month\r\n                case 'Hours':\r\n                    return 23;\r\n                case 'Minutes':\r\n                    return 59;\r\n                case 'Seconds':\r\n                    return 59;\r\n                default:\r\n                    break;\r\n\r\n            }\r\n\r\n\r\n        },\r\n\r\n        _calculateNextValue: function(input, spare, max){\r\n\r\n            let prev = spare.buffer || spare.value;\r\n\r\n            // in spare month has value as for Date (Jan = 0)\r\n            // but user input supposed to be 1 for Jan\r\n            if(spare.field === 'Month') {\r\n                prev = prev + 1;\r\n            }\r\n\r\n            //append number to the end\r\n            const x = prev * 10 + input;\r\n\r\n            // split to summ of digits\r\n            const arr = [x % 10000, x % 1000, x % 100, x % 10];\r\n\r\n            // calculate closest less value\r\n            let mm = arr.reduce(function(p, c){\r\n                return c <= max ? Math.max(p, c) : p;\r\n            }, 0);\r\n\r\n            // rollback month value\r\n            // but prevent pass 0\r\n            if(spare.field === 'Month') {\r\n                mm = mm ? mm - 1 : prev - 1;\r\n            }\r\n\r\n            // Date can not be null.\r\n            // We allow to enter 0 if it makes valid date (10, 20, 30)\r\n            if(spare.field === 'Date' && mm === 0) {\r\n                mm = prev;\r\n            }\r\n\r\n            const fnName = 'setUTC' + spare.field;\r\n\r\n            let proxyTime = new Date(this.datetime);\r\n\r\n            proxyTime[fnName](mm);\r\n\r\n            const isValid = this._validate(proxyTime);\r\n\r\n            if(isValid) {\r\n                return proxyTime;\r\n            } else {\r\n\r\n                let isFieldValid        = true;\r\n                const maxDateFieldValue = ( new Date(this.options.maxDate) )['getUTC' + spare.field]();\r\n                const minDateFieldValue = ( new Date(this.options.minDate) )['getUTC' + spare.field]();\r\n                const minTimeFieldValue = ( new Date(this.options.minTime) )['getUTC' + spare.field]();  //NaN, number\r\n                const maxTimeFieldValue = ( new Date(this.options.maxTime) )['getUTC' + spare.field]();\r\n                const thisValue         = proxyTime['getUTC' + spare.field]();\r\n\r\n                if(spare.field === 'FullYear' || spare.field === 'Month' || spare.field === 'Date') {\r\n                    isFieldValid = !(maxDateFieldValue < thisValue) && !(thisValue < minDateFieldValue);\r\n                }\r\n\r\n                if(spare.field === 'Hours' || spare.field === 'Minutes' || spare.field === 'Seconds') {\r\n\r\n                    if(maxTimeFieldValue > minTimeFieldValue) {\r\n                        isFieldValid = !( (maxDateFieldValue || maxTimeFieldValue) < thisValue) && !(thisValue < ( minTimeFieldValue || minDateFieldValue) );\r\n                    } else {\r\n                        isFieldValid = !( (maxDateFieldValue || maxTimeFieldValue) > thisValue) && !(thisValue > ( minTimeFieldValue || minDateFieldValue) );\r\n                    }\r\n                }\r\n\r\n                if(isFieldValid) {\r\n                    proxyTime = this._fitToLmits(proxyTime);\r\n                    return proxyTime;\r\n                }\r\n\r\n                spare.buffer = (spare.buffer || 0) * 10 + input;\r\n\r\n                return this.datetime;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _crement: function(operator, spare){\r\n\r\n            if(spare.field === 'Delimiter') return;\r\n\r\n            let fnName,\r\n                newValue = spare.value;\r\n\r\n            if(spare.field === 'AMPM') {\r\n                fnName = 'setUTCHours';\r\n                newValue += operator * 12;\r\n            } else if(spare.field === 'Weekday') {\r\n                fnName = 'setUTCDate';\r\n                newValue += operator;\r\n            } else {\r\n                fnName = 'setUTC' + spare.field;\r\n                newValue += operator;\r\n            }\r\n\r\n            const proxyTime = new Date(this.datetime);\r\n\r\n            proxyTime[fnName](newValue);\r\n\r\n            const result = this._fitToLmits(proxyTime);\r\n\r\n            if(result.getTime() !== this.datetime.getTime()) {\r\n\r\n                this.datetime = result;\r\n\r\n                this._refresh();\r\n\r\n                this.$element.trigger('change', this.datetime);\r\n            }\r\n\r\n        },\r\n\r\n        _modify: function(input, spare){\r\n\r\n            const maxValue = this._getMaxFieldValueAtDate(this.datetime, spare.field);\r\n\r\n            const result = this._calculateNextValue(input, spare, maxValue);\r\n\r\n            if(result !== this.datetime) {\r\n                this.datetime = result;\r\n\r\n                this._refresh();\r\n\r\n                this.$element.trigger('change', this.datetime);\r\n\r\n            }\r\n        },\r\n\r\n        /*\r\n         * @param timestamp {int}\r\n         * @return {string}\r\n         * */\r\n        _disassembleTimestamp: function(datetime, locale, format){\r\n\r\n            let result = [],\r\n                offset = 0;\r\n\r\n            //NaN check\r\n            if(datetime == 'Invalid Date') return result;\r\n\r\n            // undefined and null check\r\n            if(datetime == undefined) return result;\r\n\r\n            const pattern = format.trim().match(/\\w+|\\S|\\s/g);\r\n\r\n            const\r\n                Date      = datetime.getUTCDate(),\r\n                // Day          = datetime.getUTCDay(),\r\n                FullYear  = datetime.getUTCFullYear(),\r\n                Hours     = datetime.getUTCHours(),\r\n                // Milliseconds = datetime.getUTCMilliseconds(),\r\n                Minutes   = datetime.getUTCMinutes(),\r\n                Month     = datetime.getUTCMonth(),\r\n                Seconds   = datetime.getUTCSeconds(),\r\n                timestamp = datetime.getTime();\r\n\r\n\r\n            for(let i = 0; i < pattern.length; i++) {\r\n\r\n                let intlOption = {timeZone: 'UTC'},\r\n                    _spare     = {},\r\n                    _l         = locale + '-u-nu-latn',\r\n                    _p;\r\n\r\n                switch(pattern[i]) {\r\n\r\n                    /*\r\n                     //era is not supported yet\r\n                     case 'G':\r\n                     intlOption  = {era: 'short', year: 'numeric', timeZone: 'UTC'};\r\n                     _spare.strval = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                     _spare.value     = FullYear;\r\n                     _spare.field = 'FullYear';\r\n\r\n                     break;\r\n                     */\r\n\r\n                    case 'yy' :\r\n                        intlOption.year = '2-digit';\r\n                        _spare.strval   = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                        _spare.value    = FullYear;\r\n                        _spare.field    = 'FullYear';\r\n                        break;\r\n\r\n                    case 'yyyy' :\r\n                        intlOption    = {year: 'numeric', timeZone: 'UTC'};\r\n                        _spare.strval = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                        _spare.value  = FullYear;\r\n                        _spare.field  = 'FullYear';\r\n                        break;\r\n\r\n                    case 'M' :\r\n                        intlOption.month = '2-digit';\r\n                        _spare.strval    = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                        _spare.value     = Month;\r\n                        _spare.field     = 'Month';\r\n                        break;\r\n\r\n                    case 'MM' :\r\n                        intlOption.month = 'short';\r\n                        _spare.strval    = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                        _spare.value     = Month;\r\n                        _spare.field     = 'Month';\r\n                        break;\r\n\r\n                    case 'MMM' :\r\n                        intlOption.month = 'narrow';\r\n                        _spare.strval    = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                        _spare.value     = Month;\r\n                        _spare.field     = 'Month';\r\n                        break;\r\n\r\n                    case 'MMMM' :\r\n                        intlOption.month = 'long';\r\n                        _spare.strval    = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                        _spare.value     = Month;\r\n                        _spare.field     = 'Month';\r\n                        break;\r\n\r\n                    case 'L' :\r\n                        intlOption.month = 'long';\r\n                        intlOption.day   = '2-digit';\r\n                        // here we need the correct form of the month name\r\n                        _spare.strval    = Intl.DateTimeFormat(locale, {\r\n                            day:   '2-digit',\r\n                            month: 'long'\r\n                        }).format(timestamp).substr(3);\r\n                        _spare.value     = Month;\r\n                        _spare.field     = 'Month';\r\n                        break;\r\n\r\n                    case 'd' :\r\n                        intlOption.day = 'numeric';\r\n                        _spare.strval  = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                        _spare.value   = Date;\r\n                        _spare.field   = 'Date';\r\n                        break;\r\n\r\n                    case 'dd' :\r\n                        intlOption.day = '2-digit';\r\n                        _spare.strval  = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                        _spare.value   = Date;\r\n                        _spare.field   = 'Date';\r\n                        break;\r\n\r\n                    case 'EE' :\r\n                        intlOption.weekday = 'short';\r\n                        _spare.strval      = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                        _spare.value       = Date;\r\n                        _spare.field       = 'Weekday';\r\n                        break;\r\n\r\n                    case 'EEE' :\r\n                        intlOption.weekday = 'narrow';\r\n                        _spare.strval      = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                        _spare.value       = Date;\r\n                        _spare.field       = 'Weekday';\r\n                        break;\r\n\r\n                    case 'EEEE' :\r\n                        intlOption.weekday = 'long';\r\n                        _spare.strval      = Intl.DateTimeFormat(locale, intlOption).format(timestamp);\r\n                        _spare.value       = Date;\r\n                        _spare.field       = 'Weekday';\r\n                        break;\r\n\r\n\r\n                    case 'h':\r\n                        _spare.strval = Intl.NumberFormat(locale, {minimumIntegerDigits: 1}).format(Hours % 12);\r\n                        _spare.value  = Hours;\r\n                        _spare.field  = 'Hours';\r\n                        break;\r\n\r\n                    case 'hh':\r\n                        _spare.strval = Intl.NumberFormat(locale, {minimumIntegerDigits: 2}).format(Hours % 12);\r\n                        _spare.value  = Hours;\r\n                        _spare.field  = 'Hours';\r\n                        break;\r\n\r\n                    case 'H':\r\n                        _spare.strval = Intl.NumberFormat(locale, {minimumIntegerDigits: 1}).format(Hours);\r\n                        _spare.value  = Hours;\r\n                        _spare.field  = 'Hours';\r\n                        break;\r\n\r\n                    case 'HH':\r\n                        _spare.strval = Intl.NumberFormat(locale, {minimumIntegerDigits: 2}).format(Hours);\r\n                        _spare.value  = Hours;\r\n                        _spare.field  = 'Hours';\r\n                        break;\r\n\r\n                    case 'm' :\r\n                        _spare.strval = Intl.NumberFormat(locale, {minimumIntegerDigits: 1}).format(Minutes);\r\n                        _spare.value  = Minutes;\r\n                        _spare.field  = 'Minutes';\r\n                        break;\r\n\r\n                    case 'mm' :\r\n                        _spare.strval = Intl.NumberFormat(locale, {minimumIntegerDigits: 2}).format(Minutes);\r\n                        _spare.value  = Minutes;\r\n                        _spare.field  = 'Minutes';\r\n                        break;\r\n\r\n                    case 's' :\r\n                        _spare.strval = Intl.NumberFormat(locale, {minimumIntegerDigits: 1}).format(Seconds);\r\n                        _spare.value  = Seconds;\r\n                        _spare.field  = 'Seconds';\r\n                        break;\r\n\r\n                    case 'ss' :\r\n                        _spare.strval = Intl.NumberFormat(locale, {minimumIntegerDigits: 2}).format(Seconds);\r\n                        _spare.value  = Seconds;\r\n                        _spare.field  = 'Seconds';\r\n                        break;\r\n\r\n                    case 'a':\r\n\r\n                        // very special case\r\n                        // We do not know AMPM translation for unknown language.\r\n                        // To detect we ask Intl to translate\r\n                        // but Intl won't translate it without hours\r\n                        // Due to non-latin numbers are treated by regexp as letters\r\n                        // we force locale to use latin numbers and trim them out\r\n                        // Wzhuh!\r\n\r\n\r\n                        intlOption.hour   = 'numeric';\r\n                        intlOption.hour12 = true;\r\n                        _p                = Intl.DateTimeFormat(_l, intlOption).format(timestamp);\r\n\r\n                        _spare.strval = _p.match(/[^\\d\\s]+/g)[0];\r\n                        _spare.value  = Hours;\r\n                        _spare.field  = 'AMPM';\r\n\r\n                        break;\r\n\r\n                    // delimeter\r\n                    default:\r\n                        _spare.strval = pattern[i];\r\n                        _spare.field  = 'Delimiter';\r\n                        break;\r\n                }\r\n\r\n                _spare.length = _spare.strval.length;\r\n                _spare.offset = offset;\r\n                offset += _spare.length;\r\n                result.push(_spare);\r\n\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        _validate: function(datetime){\r\n\r\n            const timestamp = datetime.getTime();\r\n            const timePart  = (timestamp % DAYLEN + DAYLEN) % DAYLEN;\r\n            const datePart  = timestamp - timePart;\r\n\r\n            let validTime = true,\r\n                validDate = true;\r\n\r\n            const isMaxDate    = isFinite(this.options.maxDate);\r\n            const isMaxTime    = isFinite(this.options.maxTime);\r\n            const isMinDate    = isFinite(this.options.minDate);\r\n            const isMinTime    = isFinite(this.options.minTime);\r\n            const isNightRange = this.options.minTime > this.options.maxTime;\r\n\r\n            if(isMinTime && isMaxTime) {\r\n                validTime = isNightRange\r\n                    ? this.options.maxTime >= timePart || timePart >= this.options.minTime\r\n                    : this.options.maxTime >= timePart && timePart >= this.options.minTime;\r\n            }\r\n\r\n            if(isMinDate && !isMinTime) {\r\n                validDate = validDate && (timestamp >= this.options.minDate);\r\n            }\r\n\r\n            if(isMaxDate && !isMaxTime) {\r\n                validDate = validDate && (timestamp <= this.options.maxDate);\r\n            }\r\n\r\n            if(isMinDate && isMinTime) {\r\n                validDate = validDate && (datePart >= this.options.minDate);\r\n            }\r\n\r\n            if(isMaxDate && isMaxTime) {\r\n                validDate = validDate && (datePart <= this.options.maxDate);\r\n            }\r\n\r\n            return validDate && validTime;\r\n\r\n        },\r\n\r\n        _fitToLmits: function(datetime){\r\n\r\n            if(isNaN(datetime)) return datetime;\r\n\r\n            const timestamp = datetime.getTime();\r\n\r\n            let timePart = (timestamp % DAYLEN + DAYLEN) % DAYLEN, //this is trick for negative timestamps\r\n                datePart = timestamp - timePart;\r\n\r\n\r\n            if(!isNaN(this.options.minTime) && !isNaN(this.options.maxTime)) {\r\n\r\n                if(this.options.maxTime > this.options.minTime) {\r\n                    timePart = Math.max(this.options.minTime, Math.min(this.options.maxTime, timePart));\r\n                } else {\r\n                    let nearestLimit = Math.abs(timePart - this.options.maxTime) < Math.abs(timePart - this.options.minTime)\r\n                        ? this.options.maxTime\r\n                        : this.options.minTime;\r\n                    timePart         = timePart > this.options.minTime || timePart < this.options.maxTime ? timePart : nearestLimit;\r\n                }\r\n\r\n                if(!isNaN(this.options.minDate)) {\r\n                    datePart = Math.max(datePart, this.options.minDate);\r\n                }\r\n\r\n                if(!isNaN(this.options.maxDate)) {\r\n                    datePart = Math.min(datePart, this.options.maxDate);\r\n                }\r\n\r\n\r\n            } else {\r\n\r\n                timePart = 0;\r\n\r\n                let mD = isNaN(this.options.minDate) ? -Infinity : this.options.minDate;\r\n                let MD = isNaN(this.options.maxDate) ? Infinity : this.options.maxDate;\r\n\r\n                datePart = Math.max(mD, Math.min(MD, timestamp));\r\n\r\n                if(isNaN(datePart)) {\r\n                    datePart = timestamp;\r\n                }\r\n            }\r\n\r\n            return new Date(datePart + timePart);\r\n\r\n        },\r\n\r\n        getTime: function(){\r\n            return this.datetime;\r\n        },\r\n\r\n        setTime: function(date){\r\n\r\n            this.datetime = new Date(date);\r\n            this._refresh();\r\n        },\r\n\r\n        setOptions: function(options){\r\n\r\n            this.options = Object.assign({}, this.options, options);\r\n\r\n            this.datetime = options.hasOwnProperty('datetime') ? new Date(options.datetime) : this.datetime;\r\n\r\n            let mD = new Date(this.options.minDate).getTime();\r\n            let MD = new Date(this.options.maxDate).getTime();\r\n            let mT = new Date(this.options.minTime).getTime();\r\n            let MT = new Date(this.options.maxTime).getTime();\r\n\r\n\r\n            this.options.minTime = ( mT % DAYLEN + DAYLEN ) % DAYLEN; // NaN, number [0...86400000 - 1]\r\n            this.options.maxTime = ( MT % DAYLEN + DAYLEN ) % DAYLEN;\r\n            this.options.minDate = isNaN(mT) ? mD : mD - mD % DAYLEN;  // NaN, number\r\n            this.options.maxDate = isNaN(MT) ? MD : MD - MD % DAYLEN;\r\n\r\n            if(!isNaN(this.options.minTime)) {\r\n                this.options.maxTime = isNaN(this.options.maxTime) ? DAYLEN : this.options.maxTime;\r\n            }\r\n\r\n            if(!isNaN(this.options.maxTime)) {\r\n                this.options.minTime = isNaN(this.options.minTime) ? 0 : this.options.minTime;\r\n            }\r\n\r\n\r\n            this._refresh();\r\n\r\n        },\r\n\r\n        destroy: function(){\r\n            this.element.removeEventListener('mouseup', this._handleMouseDown);\r\n            this.element.removeEventListener('keydown', this._handleKeydown);\r\n            this.element.removeEventListener('mousewheel', this._handleMousewheel);\r\n\r\n            $(this.element).removeData(pluginName);\r\n        }\r\n\r\n\r\n    };\r\n\r\n    // A really lightweight plugin wrapper around the constructor,\r\n    // preventing against multiple instantiations\r\n    $.fn[pluginName] = function(method, options){\r\n\r\n        /* eslint-disable no-console */\r\n        if(!this.data(pluginName)) {\r\n\r\n            if(typeof method === 'string') {\r\n                console.warn('datetime plugin expect options object as first argument');\r\n                return;\r\n            }\r\n\r\n            this.data(pluginName, new Plugin(this, method));\r\n\r\n            return this;\r\n\r\n        } else {\r\n            //calling method\r\n            let instance = this.data(pluginName);\r\n\r\n            if(typeof instance[method] !== 'function') {\r\n                console.warn('method ', method, ' not exist');\r\n                return;\r\n            }\r\n\r\n            return instance[method](options);\r\n\r\n        }\r\n        /* eslint-enable no-console */\r\n\r\n    };\r\n\r\n})(jQuery, window, document);"]}